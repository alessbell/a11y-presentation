import Image from "next/image";

<SlidePage>

<Cover>

# Intro to Web a11y

Front-end Knowledge Exchange, Jan '21

</Cover>

---

# Overview

1. What is `a11y`?
1. `a11y` basics
1. How to test a11y

<SpeakerNotes>

First, let's make sure we have a shared definition of a11y.

What is accessibility as a concept? What does it mean on the web?

a11y basics + best practices

testing: how to we build an accessible web as we're developing, and how do we keep it that way and prevent regressions?

</SpeakerNotes>

---

# 1. What is `a11y`?

**Web accessibility** means that **people with disabilities** can **use** and **understand** the web

<SpeakerNotes>Numeronym for accessibility</SpeakerNotes>

---

## Why?

1. It's a basic human right
1. It's required by law
1. It's good for business ([WCAG business case](https://www.w3.org/WAI/business-case/#is-there-a-business-case-for-accessibility))
1. It's good UX

<SpeakerNotes>

Human rights: The United Nations Convention on the Rights of Persons with Disabilities (CRPD) is an international human rights treaty. The CRPD defines access to technology like the Web as a basic human right.

Many of us on this call may already be convinced of the benefits of good accessibility practices, but it's important to understand what the stakes are

Front-end engineers, we already have a lot on our plates:

- a lot of new stuff to keep up with, JS language features + browser APIs, new testing frameworks, new patterns...
- why do we need to be concerned with a11y too?

- It's important that we don't violate anyone's human rights, that we meet our legal obligations, that we maximize our total adressable market + customer base, but it also improves the experience for all users regardless of ability

</SpeakerNotes>

---

<Image
  src="/laineyFeingold.png"
  alt="Screenshot of a Lainey Feingold firm's blogpost on a11y court cases"
  layout="intrinsic"
  width="1200"
  height="800"
/>

---

## It's required by law (cont'd)

> Today, internet technology enables individuals to participate actively in their community and engage in commerce from the comfort and convenience of their home. It would be a cruel irony to adopt the interpretation of the ADA espoused by Blick, which would render the legislation intended to emancipate the disabled from the bonds of isolation and segregation obsolete when its objective is increasingly within reach.
>
> <cite>
>   EDNY Judge Jack Weinstein in Andrews v. Blick Art Materials, 2017 (
>   <a href="https://www.lflegal.com/2017/08/ny-web-cases/" target="_blank">
>     source
>   </a>
>   )
> </cite>

<SpeakerNotes>

The web is this amazing utility that allows us to connect in communities, engage in commerce - this judge is saying "why would we exclude the web from meeting this burden of accessibility when it's increasingly within reach?"

Human rights:
The United Nations Convention on the Rights of Persons with Disabilities (CRPD) is an international human rights treaty. The CRPD defines access to technology like the Web as a basic human right.

Required by law:
Americans with Disabilities Act (ADA) - it has been reaffirmed in the courts as applying to websites time and time again

</SpeakerNotes>

---

## It's good UX

<Image
  src="/microsofta11y.png"
  alt="Infographic on permanent/temporary/situational gradations of mobility/ability"
  layout="intrinsic"
  width="500‚Ää"
  height="800"
/>

---

<Image
  src="/googlemaps.gif"
  alt="Gif of google maps one-handed zoom"
  layout="intrinsic"
  width="450‚Ää"
  height="900"
/>

<SpeakerNotes>
One of my favorite examples of good a11y resulting in better experience for everyone is [Google Maps](https://support.google.com/maps/answer/6396990?co=GENIE.Platform%3DAndroid&hl=en)

This makes the UX better for everyone:

- disabled folks who would otherwise be permanently unable to use this app without this feature
- people who temporarily or situationally find themselves benefitting from this UX pattern

But I use this all the time if I'm carrying heavy groceries for example and trying to navigate one-handed, or a new parent as we saw in the previous slide

</SpeakerNotes>

---

# 2. `a11y` basics

## (that aren't always so basic)

---

## The **World Wide Web Consortium** ([W3C](https://www.w3.org/)) maintains the

## **Web Content Accessibility Guidelines** ([WCAG](https://www.w3.org/WAI/standards-guidelines/wcag/))

---

- The goal of WCAG is to provide a single shared standard for web accessibility

- The latest standard is **WCAG 2.1**

- **WCAG 2.2** is scheduled to be published in 2021 ([what's new](https://www.w3.org/WAI/standards-guidelines/wcag/new-in-22/))

- WCAG is a **technical standard**, not an introduction to accessibility

<SpeakerNotes>
  - The latest standard is **WCAG 2.1**, published on June 5, 2018
</SpeakerNotes>

---

# Design Patterns and Widgets ([src](https://www.w3.org/TR/wai-aria-practices-1.1/#aria_ex))

<Image
  src="/designPatterns.png"
  alt="WCAG 2.1 at a glance"
  layout="intrinsic"
  width="1250"
  height="800"
/>

---

- [WCAG 2.1 focuses on four guiding principles, "**POUR**"](https://www.w3.org/WAI/standards-guidelines/wcag/glance/)
  - PERCEIVABLE
  - OPERABLE
  - UNDERSTANDABLE
  - ROBUST

---

<Image
  src="/POUR.png"
  alt="WCAG 2.1 at a glance"
  layout="intrinsic"
  width="1000"
  height="800"
/>

<SpeakerNotes>

- Perceivable: Users must be able to perceive the information being presented. It cannot be imperceptible to all their senses
- Operable: Users must be able to operate the interface. The interface cannot require interaction that a user cannot perform
- Understandable: Users must be able to understand the information as well as the operation of the user interface. The content or operation cannot be beyond their understanding
- Robust: Users must be able to access content as technologies advance. As technologies and user agents evolve, the content should remain accessible

</SpeakerNotes>

---

# State of the web: [The WebAIM Million](https://webaim.org/projects/million/)

<Image
  src="/WCAGConformance1.png"
  alt="Number of homepages with WCAG errors in audit"
  layout="intrinsic"
  width="800"
  height="550"
/>

<SpeakerNotes>
  An accessibility analysis of the top 1,000,000 home pages, Interior pages are
  about the same
</SpeakerNotes>

---

<Image
  src="/WCAGConformance2.png"
  alt="Number of homepages with WCAG errors in audit"
  layout="intrinsic"
  width="950"
  height="500"
/>

---

> All automated tools, including WAVE, have limitation‚Äîonly 25% to 35% of possible conformance failures can be automatically detected. Absence of detectable errors does not indicate that a site is accessible or compliant.

---

# Barriers to shipping accessible web apps

## via Amberley Romo @ amberley.dev ([source](https://amberley.dev/blog/2020-02-05-gatsby-days-la-a11y-unconference-notes/))

- Remembering to use tools in the development process
- Deciding what "good enough" means
- Too many ambiguous and distributed sources of information

<SpeakerNotes>

- As a developer without disabilities, they have direct visual feedback in the course of developing -- remembering to test and bring it outside perspectives.
- Sometimes we think a site/experience is inaccessible, when the issue might be a developer's lack of familiarity/dexterity with a11y tools like screen readers
- There aren't any complete resources for what makes something accessible, because it's so nuanced
- The standards say what something should do, but not how, the path is not always clear

</SpeakerNotes>

---

<Image
  src="/aweary1.png"
  alt="Tweet from @aweary"
  layout="intrinsic"
  width="800"
  height="850"
/>

---

## "HTML is accessible by default"

<SpeakerNotes>Who has heard this before?</SpeakerNotes>

---

## Maybe we don't need JS? üßê

<SpeakerNotes>Should our site work without JavaScript?</SpeakerNotes>

---

<Image
  src="/BBC.png"
  alt="BBC a11y docs: must work without JS"
  layout="intrinsic"
  width="1200"
  height="500"
/>

[source: BBC front-end developer guidelines](https://accessibility-manual.dwp.gov.uk/guidance-for-your-job-role/software-engineer-or-frontend-developer#no-reliance-on-javascript)

---

<Image
  src="/disabledJS.png"
  alt="aweary counterpoint"
  layout="intrinsic"
  width="700"
  height="800"
/>

---

## Many examples of good accessible design patterns from the WCAG contain JS!

**JavaScript is essential for many accessible patterns. Misusing it is the problem, just like with HTML.**

<SpeakerNotes>
  Context: it dependsTM -- some government sites must be accessible without JS
  and often have to deal with the most constraints
</SpeakerNotes>

---

<Image
  src="/wcagAccordions.gif"
  alt="WCAG example with javascript"
  layout="intrinsic"
  width="500"
  height="800"
/>

[source](https://www.w3.org/TR/wai-aria-practices-1.1/examples/accordion/accordion.html)

---

```js
// Bind keyboard behaviors on the main accordion container
accordion.addEventListener("keydown", function (event) {
  var key = event.which.toString();
  // 33 = Page Up, 34 = Page Down
  var ctrlModifier = event.ctrlKey && key.match(/33|34/);

  // Is this coming from an accordion header?
  if (event.target.classList.contains("Accordion-trigger")) {
    // 38 = Up, 40 = Down
    if (key.match(/38|40/) || ctrlModifier) {
      var index = triggers.indexOf(event.target);
      var direction = key.match(/34|40/) ? 1 : -1;
      var length = triggers.length;
      var newIndex = (index + length + direction) % length;

      triggers[newIndex].focus();
    }
  }
});
```

---

# Quick wins

## (src: [a11y.coffee](https://a11y.coffee/quick-wins/))

- low contrast
  - detected on 86.3% of home pages in February 2020
- missing alt text for images
  - detected on 66.3% of home pages in February 2020

```html
<img src="./feature-image" />
```

---

## Quick wins, cont'd

- empty links
  - detected on 59.9% of home pages in February 2020

```html
<a href="http://www.twitter.com/washingtonpost">
  <span class="fa fa-twitter"></span>
</a>
```

- missing form input labels
  - detected on 53.8% of home pages in February 2020

```html
<div>
  Name:
  <label for="name">Name:</label>
  <input type="text" name="name" />
</div>
```

---

## Next steps:

- logical focus order
  - a logical order means the focus is always moving left to right and top to bottom within each section, and left to right and top to bottom between each section
- correct roles
  - links that look like buttons

```html
<a href="/apply-now" class="btn" role="button">Apply now</a>
```

- correct heading hierarchy so the page is "skimmable" for screenreader users
- focus is visible via keyboard navigation
- links make sense out of context

<SpeakerNotes>
- Links should navigate between pages and buttons should interact with data, such as submitting a form
- However there might be some instances where research shows that a link needs to be more visible, such as a call to action.
- By giving the link a role of button, it can now be determined to be a button. So if somebody is using voice recognition software such as Dragon, when they say ‚Äúclick button‚Äù, Dragon will be able to find it on the page.

</SpeakerNotes>

---

# Advanced topics:

- Sessions (unexpectedly logging users out)
- Trap focus in modals
- Announce dynamic content: aria-live
- SPA advanced topics ([Gatsby user testing](https://www.gatsbyjs.com/blog/2019-07-11-user-testing-accessible-client-routing/))
  - Without page refreshes, screen reader users may not be informed that the page has changed
  - On client-side page transitions, focus to the top of the application (i.e. a parent wrapper element) to mimic a traditional browser refresh and announce new content in assistive technology

---

# 3. How to test `a11y`

---

## My personal favorite overview of a11y testing methods available:

## ["Accessibility Testing is like Making Coffee" by Madalyn Parker](https://madalyn.dev/blog/a11y-testing-coffee/)

---

<Image
  src="/a11ycoffee1.png"
  alt="Infographic on a11y testing"
  layout="intrinsic"
  width="800"
  height="600"
/>

---

## Automated Testing Tools:

- jsx-a11y, @axe-core/react
- axe
- Lighthouse
- Accessibility Insights
- WAVE Web Accessibility Evaluation Tool created by WebAIM

<SpeakerNotes>

- jsx-a11y, @axe-core/react
  - linters and code formatters that statically analyze our source code
- axe
  - this is what sits under most automated tooling. You can leverage it directly in your code using the axe-core API or use their browser extensions to run on rendered pages.
- Lighthouse includes accessibility auditing and runs axe.
  - It‚Äôs shipped right in Chrome DevTools and also has a CI integration you can add to your pipeline.
- Accessibility Insights is my all time favorite accessibility testing tool.
  - It‚Äôs built by Microsoft and has versions for Android, web, and Windows. I‚Äôll be talking about their Chrome extension, which also uses axe, but all of these are top notch amazing for auditing.
- WAVE Web Accessibility Evaluation Tool is created by WebAIM.
  - They have their own API and this tool can either be run from their website or as a browser extension.

</SpeakerNotes>

---

<Image
  src="/a11ycoffee2.png"
  alt="Infographic on a11y testing"
  layout="intrinsic"
  width="800"
  height="600"
/>

---

## Semi-Automated Testing Tools:

- WAVE Tool (again!) because:
  - its ‚ÄúAlerts‚Äù section flags potential violations
  - it surfaces all elements using WAI-ARIA
  - it shows page structure with Headings and Landmarks
- Accessibility Insights (also again!) because:
  - its ‚ÄúTab Stops‚Äù feature requires you to actually tab through the page manually
  - its ‚ÄúAd hoc tools‚Äù surface structure similarly to the WAVE tool
- Integration Tests can be used to run a11y checks, interact with the UI, and run them again, verify that focus is where it should be (e.g. is it moved to the modal when the modal is opened?)
  - pa11y
  - cypress-axe
  - nightwatch-axe ([Webmo PR](https://github.braintreeps.com/venmo/webmo/pull/73/files))

<SpeakerNotes>

- WAVE Tool (again!) because:
  - its ‚ÄúAlerts‚Äù section flags potential
    violations
  - it surfaces all elements using WAI-ARIA, which needs to be used
    mindfully and intentionally and should always be looked at critically
  - it shows page structure with Headings and Landmarks but leaves it up to you to
    determine whether they meet standards
- Accessibility Insights (also again!)
  because:
  - its ‚ÄúTab Stops‚Äù feature requires you to actually tab through the
    page manually to verify that tab order follows both reading order and DOM
    order
  - its ‚ÄúAd hoc tools‚Äù surface structure similarly to the WAVE tool
- Integration Tests can be used to run a11y checks, interact with the UI, and
  run them again, verify that focus is where it should be (e.g. is it moved to
  the modal when the modal is opened?)
  - pa11y
  - cypress-axe
  - nightwatch-axe

</SpeakerNotes>

---

<Image
  src="/VenmoHomepageWAVE.png"
  alt="Venmo Homepage WAVE Audit Results"
  layout="intrinsic"
  width="1250"
  height="800"
/>

---

<Image
  src="/a11ycoffee3.png"
  alt="Infographic on a11y testing"
  layout="intrinsic"
  width="800‚Ää"
  height="600"
/>

---

# Manual Testing

- navigating with your keyboard
- using a screen reader
- turning your screen magnification way up (300%+)
- using a site with audio muted
- verifying that the prefers reduced motion setting is respected

<SpeakerNotes>
  WAI ARIA: Web Accessibility Initiative - Accessible Rich Internet Applications
</SpeakerNotes>

---

# Resources:

## Getting set up to test

- https://madalyn.dev/blog/manual-a11y-testing-setup/
- https://madalyn.dev/blog/5-things-a11y-keyboard-testing/
- https://madalyn.dev/blog/a11y-testing-coffee/
- https://a11y.coffee/start-testing/

---

## ARIA

- https://w3c.github.io/using-aria/
- https://dev.opera.com/articles/introduction-to-wai-aria/
- https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA
- https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles
- https://egghead.io/lessons/aria-accessible-icon-buttons

<SpeakerNotes>
  - WAI ARIA: Web Accessibility Initiative - Accessible Rich Internet
  Applications
  - Became a completed W3C Recommendation in March 2014
  - specifies how to increase the accessibility of web pages, in particular, dynamic content, and user interface components developed with Ajax, HTML, JavaScript, and related technologies.

</SpeakerNotes>

---

## Designing for Screen Reader Compatibility

- https://web.archive.org/web/20160916181038/
- http://webaim.org/techniques/screenreader#linearization

## How to be a keyboard a11y super hero

- https://web.archive.org/web/20160325182436/
- http://simplyaccessible.com/article/keyboard-superhero/

</SlidePage>
